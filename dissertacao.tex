% ---------------------------------------------------------------------------- %
% Mauricio Finavaro Aniche                                                     %
% mauricioaniche@gmail.com                                                     %
% ---------------------------------------------------------------------------- %

\documentclass[11pt,openany,twoside,a4paper]{book}

% ---------------------------------------------------------------------------- %
% Pacotes 
\usepackage[T1]{fontenc}
\usepackage[brazil]{babel}
\usepackage[utf8]{inputenc}
\usepackage[pdftex]{graphicx}           % usamos arquivos pdf/png como figuras
\usepackage{pifont}
\usepackage{amsfonts}
\usepackage{amssymb} 
\usepackage{setspace}                   % espaçamento flexível
\usepackage[bf,small,compact]{titlesec} % cabeçalhos dos títulos: menores e compactos
\usepackage{indentfirst}                % indentação do primeiro parágrafo
\usepackage{subfigure}                  % uso de várias figuras numa só
\usepackage{makeidx}                    % índice remissivo
\usepackage[nottoc]{tocbibind}          % acrescentamos a bibliografia/indice/conteudo no Table of Contents
\usepackage{courier}                    % usa o Adobe Courier no lugar de Computer Modern Typewriter
\usepackage{type1cm}                    % fontes realmente escaláveis
\usepackage{listings}                   % para formatar código-fonte (ex. em Java)
\usepackage{setspace}
\usepackage{longtable}
\usepackage{framed}
\usepackage{multirow}
\usepackage{titletoc}
\usepackage{lscape}
\usepackage[final]{pdfpages}
\usepackage[fixlanguage]{babelbib}
\usepackage[font=small,format=plain,labelfont=bf,up,textfont=it,up]{caption}
\usepackage[usenames,svgnames,dvipsnames,table]{xcolor}
\usepackage[a4paper,top=2.54cm,bottom=2.0cm,left=2.0cm,right=2.54cm]{geometry}% margens
\usepackage{float}
\usepackage[pdftex,plainpages=false,pdfpagelabels,pagebackref,colorlinks=true,citecolor=black,linkcolor=black,urlcolor=black,filecolor=black,bookmarksopen=true]{hyperref} % links em preto
\usepackage[all]{hypcap}                % soluciona o problema com o hyperref e capitulos
\usepackage[numbers,square,sort,nonamebreak,comma]{natbib}  % citação
\usepackage{longtable}
                                % bibliográfica alpha (alpha-ime.bst)

\usepackage{type1cm}      % fontes realmente escaláveis
\fontsize{60}{62}\usefont{OT1}{cmr}{m}{n}{\selectfont}

% ---------------------------------------------------------------------------- %
% Cabeçalhos similares ao TAOCP de Donald E. Knuth
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\chaptermark}[1]{\markboth{\MakeUppercase{#1}}{}}
\renewcommand{\sectionmark}[1]{\markright{\MakeUppercase{#1}}{}}
\renewcommand{\headrulewidth}{0pt}

% ---------------------------------------------------------------------------- %
\graphicspath{{./figuras/}}             % caminho das figuras (recomendável)
\frenchspacing                          % arruma o espaço: id est (i.e.) e exempli gratia (e.g.) 
\urlstyle{same}                         % URL com o mesmo estilo do texto e não mono-spaced
\makeindex                              % para o índice remissivo
\raggedbottom                           % para não permitir espaços extra no texto
\fontsize{60}{62}\usefont{OT1}{cmr}{m}{n}{\selectfont}
\cleardoublepage
\normalsize

% ---------------------------------------------------------------------------- %
% Opções de listing usados para o código fonte
% Ref: http://en.wikibooks.org/wiki/LaTeX/Packages/Listings
\lstset{ %
language=Java,                  % choose the language of the code
basicstyle=\footnotesize,       % the size of the fonts that are used for the code
numbers=left,                   % where to put the line-numbers
numberstyle=\footnotesize,      % the size of the fonts that are used for the line-numbers
stepnumber=1,                   % the step between two line-numbers. If it's 1 each line will be numbered
numbersep=5pt,                  % how far the line-numbers are from the code
showspaces=false,               % show spaces adding particular underscores
showstringspaces=false,         % underline spaces within strings
showtabs=false,                 % show tabs within strings adding particular underscores
frame=single,	                % adds a frame around the code
framerule=0.6pt,
tabsize=2,	                    % sets default tabsize to 2 spaces
captionpos=b,                   % sets the caption-position to bottom
breaklines=true,                % sets automatic line breaking
breakatwhitespace=false,        % sets if automatic breaks should only happen at whitespace
escapeinside={\%*}{*)},         % if you want to add a comment within your code
backgroundcolor=\color[rgb]{1.0,1.0,1.0}, % choose the background color.
rulecolor=\color[rgb]{0.8,0.8,0.8},
extendedchars=true,
xleftmargin=10pt,
xrightmargin=10pt,
framexleftmargin=10pt,
framexrightmargin=10pt
}

% ---------------------------------------------------------------------------- %
% Corpo do texto
\begin{document}
\frontmatter 
% cabeçalho para as páginas das seções anteriores ao capítulo 1 (frontmatter)
\fancyhead[RO]{{\footnotesize\rightmark}\hspace{2em}\thepage}
\setcounter{tocdepth}{2}
\fancyhead[LE]{\thepage\hspace{2em}\footnotesize{\leftmark}}
\fancyhead[RE,LO]{}
\fancyhead[RO]{{\footnotesize\rightmark}\hspace{2em}\thepage}

\onehalfspacing  % espaçamento

% ---------------------------------------------------------------------------- %
% Capa
% ---------------------------------------------------------------------------- %
\thispagestyle{empty}
\begin{center}
    \vspace*{2.3cm}
    \textbf{\Large{Como a prática de TDD influencia o \\projeto de classes em sistemas orientados a objetos}}\\
    
    \vspace*{1.2cm}
    \Large{Mauricio Finavaro Aniche}
    
    \vskip 2cm
    \textsc{
    Dissertação apresentada\\[-0.25cm] 
    ao\\[-0.25cm]
    Instituto de Matemática e Estatística\\[-0.25cm]
    da\\[-0.25cm]
    Universidade de São Paulo\\[-0.25cm]
    para\\[-0.25cm]
    obtenção do título\\[-0.25cm]
    de\\[-0.25cm]
    Mestre em Ciência da Computação}
    
    \vskip 1.5cm
    Programa: Mestrado em Ciência da Computação\\
    Orientador: Prof. Dr. Marco Aurélio Gerosa

   	\vskip 1.5cm
    \normalsize{São Paulo, Março de 2012}
\end{center}

\newpage
\thispagestyle{empty}
    \begin{center}
        \vspace*{2.3 cm}
        \textbf{\Large{Como a prática de TDD influencia o \\projeto de classes em sistemas orientados a objetos}}\\
        \vspace*{2 cm}
    \end{center}

    \vskip 2cm

    \begin{flushright}
     Este exemplar corresponde à redação\\
     final da dissertação/tese devidamente corrigida\\
     e defendida por Mauricio Finavaro Aniche\\
     e aprovada pela Comissão Julgadora.
    
	Esta versão definitiva da tese/dissertação\\
	contém as correções e alterações sugeridas pela\\
	Comissão Julgadora durante a defesa realizada\\
    por Mauricio Finavaro Aniche em 25/4/2012.

    \vskip 2cm

    \end{flushright}
    \vskip 4.2cm

    \begin{quote}
    \noindent Comissão Julgadora:
    
    \begin{itemize}
		\item Prof. Dr. Marco Aurélio Gerosa (orientador) - IME-USP
		\item Prof. Dr. Ismar Frango Silveira - Mackenzie
		\item Prof. Dr. Rafael Prikladnicki - PUC-RS
    \end{itemize}
      
    \end{quote}
\pagebreak

\pagenumbering{roman}     % começamos a numerar 

% ---------------------------------------------------------------------------- %
\chapter*{Agradecimentos}

Em primeiro lugar, gostaria de agradecer a meu orientador, Prof. Dr. Marco Aurélio
Gerosa, que ao longo destes três anos me ensinou mais do que eu poderia imaginar.
Entrei no mestrado com o intuito de aprender sobre TDD, e saí de lá entendendo
melhor sobre ciência. Lições essas que levarei para toda minha vida na academia e indústria.
Aproveito também para agradecer aos professores Dr. Ismar Frango Silveira e Dr. Rafael
Prikladnicki, que aceitaram participar da banca avaliadora
e deram excelentes sugestões durante a qualificação.

Gostaria também de agradecer aos amigos Gustavo Oliva e Mauricio de Diana, que
criticaram a pesquisa durante todo o tempo, fazendo-me pensar novamente sobre
várias das minhas crenças em engenharia de software. Gostaria muito que continuássemos
nosso grupo de pesquisa, pois devo a vocês grande parte do que aprendi no mestrado.

Agradeço também a minha família, amigos e namorada, por terem me dado todo o suporte
emocional que precisei ao longo desta caminhada. Uma menção especial ao meu pai,
que me presenteou com um livro de programação para crianças quando eu tinha por volta
de 9 anos. Talvez, sem esse presente, essa pesquisa nunca teria acontecido.

Agradeço aos meus amigos de trabalho da Locaweb e Caelum Ensino e Inovação, 
por aguentar meus discursos e palestras sobre TDD, e mostrar diferentes
pontos de vista. Isso me ajudou a entender mais sobre a prática, o que resultou
em uma discussão mais rica ao longo do trabalho.

Por fim, agradeço às empresas que aceitaram participar do meu estudo, Bluesoft,
Amil, e WebGoal (São Paulo e Poços de Caldas). Além disso, obrigado aos meus colegas
de profissão Rafael Werner, Murilo Amêndola e Juan Lopes, por também terem
participado da pesquisa de maneira independente. Fico muito feliz por ter sido
bem recebido pela indústria, e espero que possamos continuar essa parceria entre
academia e indústria.

Um forte abraço a todos!

% ---------------------------------------------------------------------------- %
\chapter*{Resumo}

Desenvolvimento Guiado por Testes (TDD) é uma das práticas sugeridas na Programação
Extrema. A mecânica da prática é simples: o programador escreve o teste antes
de escrever o código. É, portanto, possível inferir que a prática de TDD é uma
prática de testes de software. Entretanto, muitos autores de livros 
conhecidos pela indústria e academia
afirmam que os efeitos da prática vão além. Segundo eles,
TDD ajuda o desenvolvedor durante o processo de criação do projeto classes,
fazendo-os criar classes menos acopladas e mais coesas.

Entretanto, grande parte dos trabalhos da literatura são voltados a descobrir se
a prática faz diferença na qualidade do código gerado, mas poucos são os 
autores que discutem como a prática realmente auxilia.
Mesmo os praticantes não entendem ou conseguem expressar bem como a prática
os guia.

Este trabalho tem por objetivo compreender melhor os efeitos de TDD e como sua prática 
influencia o desenvolvedor durante o processo de projeto de sistemas orientados a objetos.
Para alcançar o objetivo, este estudo faz uso de uma combinação entre um experimento controlado 
inicial, na qual participantes foram
convidados a resolver exercícios pré-elaborados utilizando TDD e, a partir dos dados colhidos nesse estudo, um outro
estudo qualitativo detalhou como a prática influenciou as decisões de projeto.

Ao final, observamos que a prática de TDD pode guiar o desenvolvedor durante o processo
de criação do projeto de classes por meio de constantes \textit{feedbacks} sobre a qualidade
do projeto. Esses \textit{feedbacks} alertam desenvolvedores sobre possíveis problemas,
como alto acoplamento ou baixa coesão. Os desenvolvedores, por sua vez, devem interpretar
e melhorar o projeto de classes. Este trabalho catalogou e nomeou os padrões de
\textit{feedback} percebidos pelos participantes.

\noindent \textbf{Palavras-chave:} Desenvolvimento Guiado por Testes, Sistemas Orientados
a Objetos, Projeto de Classes, Qualidade Interna de Código.

% ---------------------------------------------------------------------------- %
\chapter*{Abstract}

Test-Driven Development (TDD) is one of the suggested practices in Extreme
Programming (XP). The mechanical is simple: the developer writes a test before
writing the implementation. Thus, TDD is often seen as
a software testing technique. However, many famous book authors suggest that
TDD can help developers during the class design creation
process, enabling developers to create less coupled highly cohesive classes.

Most of the academic studies are interested on finding the difference between
a TDD'd and a non-TDD'd code. Only a few of them discuss how the practice
really supports class design. Even practitioners
do not understand how the practice guides them.

This work aims to understand better the effects of TDD and how the practice influences the
practitioner during the class design process in object-oriented systems. 
This work uses a combination of an initial controlled experiment, in which the participants
were invited to solve a few prepared exercises using TDD and, based on gathered data,
a qualitative study explored, in detail, the way TDD influenced the design decisions
taken by the participants.

At the end, we observed that the practice of TDD can guide developers during the 
class design creation process through constant feedback about its quality.
These feedbacks alert developers about possible problems, such as high coupling or
low cohesion. Developers then should interpret and improve the class design accordingly.
This study also catalogues the TDD feedback patterns perceived by the participants.

\noindent \textbf{Keywords:} Test-Driven Development, Object-Oriented
Systems, Class Design, Internal Code Quality.

% ---------------------------------------------------------------------------- %
% Sumário
\tableofcontents    % imprime o sumário

% ---------------------------------------------------------------------------- %
\chapter{Lista de Abreviaturas}
\begin{tabular}{ll}
         TDD         & Desenvolvimento Guiado por Testes (do inglês, \emph{Test-Driven Development})\\ 
         
         XP          & Programação Extrema (do inglês, \emph{Extreme Programming})\\
		 
		 BDUF		 & Projeto de Classe Criado de Uma Só Vez (\textit{Big Design Up-Front})\\
		 
		 PRU		 & Princípio da Responsabilidade Única (\emph{Single Responsibility
		 Principle})\\
		 
		 PID		 & Princípio da Inversão de Dependências (\emph{Single Responsibility
		 Principle})\\ 
		 
		 PAF		 & Princípio do Aberto-Fechado (\emph{Open-Closed Principle})\\
		 
		 PSL	 	 & Princípio da Substituição de Liskov (\emph{Liskov Substitution
		 Principle})\\
		 
		 PSI		 & Princípio da Segregação de Interfaces (\emph{Interface Segregation
		 Principle})\\
		 
		 OO		 	 & Orientação a Objetos\\
		
		 WBMA		 & Workshop Brasileiro de Métodos Ágeis
		 
\end{tabular}

% ---------------------------------------------------------------------------- %
% Listas de figuras e tabelas criadas automaticamente
\listoffigures
\begingroup
\let\cleardoublepage\relax
\let\clearpage\relax
\listoftables
\endgroup

% ---------------------------------------------------------------------------- %
% Capítulos do trabalho
\mainmatter

% cabeçalho para as páginas de todos os capítulos
\fancyhead[RE,LO]{\thesection}

%\singlespacing              % espaçamento simples
\onehalfspacing            % espaçamento um e meio

\input cap-introducao
\input cap-tdd
\input cap-quali-planejamento
\input cap-findings
\input cap-findings-quantitativo
\input cap-ameacas
\input cap-conclusoes

% cabeçalho para os apêndices
\renewcommand{\chaptermark}[1]{\markboth{\MakeUppercase{\appendixname\ \thechapter}} {\MakeUppercase{#1}} }
\fancyhead[RE,LO]{}
\appendix

\include{ape-design}
\include{ape-questionario-inicio}
\include{ape-exercicios}
\include{ape-questionario-pos}
\include{ape-entrevista}
\include{ape-informacoes}
\include{ape-autorizacao}
\include{ape-valores}

% ---------------------------------------------------------------------------- %
% Bibliografia
\backmatter \singlespacing   % espaçamento simples
\bibliographystyle{alpha-ime}% citação bibliográfica alpha
\bibliography{bibliografia}  % associado ao arquivo: 'bibliografia.bib'


\end{document}
