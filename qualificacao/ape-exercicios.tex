\chapter{Exercícios}
\label{ape:exercicios}

Os exercícios são os mesmos para todos os grupos. O participante, em caso de dúvidas, poderá perguntar ao pesquisador.

\section{Lembrete ao participante}

Caro participante,

Lembre-se que os problemas aqui propostos simulam complicações do mundo real. 
Ao resolvê-los, tenha em mente que esses códigos serão futuramente mantidos
por você ou até por uma equipe maior.

Tente criar o design mais elegante possível em todas as soluções. Por serem problemas
recorrentes, imagine que amanhã esse mesmo problema se repetirá.
Escreva um código flexível o suficiente para que novas mudanças sejam fáceis de serem 
implementadas.

\section{Exercício 1 - Calculadora de Salário}

O participante deve implementar uma calculadora de salário de funcionários. Um
funcionário contém nome, e-mail, salário-base e cargo. De acordo com seu cargo,
a regra para cálculo do salário líquido é diferente:

\begin{enumerate}
	\item Caso o cargo seja DESENVOLVEDOR, o funcionário terá desconto de 20\%
	caso o salário seja maior ou igual que 3.000,00, ou apenas 10\% caso o salário seja menor 
	que isso.
	
	\item Caso o cargo seja DBA, o funcionário terá desconto de 25\%
	caso o salário seja maior ou igual que 2.000,00, ou apenas 15\% caso o salário seja menor 
	que isso.

	\item Caso o cargo seja TESTADOR, o funcionário terá desconto de 25\%
	caso o salário seja maior ou igual que 2.000,00, ou apenas 15\% caso o salário seja menor 
	que isso.
	
	\item Caso o cargo seja GERENTE, o funcionário terá desconto de 30\%
	caso o salário seja maior ou igual que 5.000,00, ou apenas 20\% caso o salário seja menor 
	que isso.
\end{enumerate}

Exemplos de cálculo do imposto:

\begin{itemize}
	\item DESENVOLVEDOR com salário-base 5,000.00. Salário final = 4.000,00
	\item GERENTE com salário-base de 2.500,00. Salário final: 2.000,00
	\item TESTADOR com salário de 550.00. Salário final: 467,50
\end{itemize}


O participante deve criar todo o código responsável para esse cálculo. Uma classe com
o método "main()" deverá ser entregue ao final, com exemplo de uso das classes criadas.

\section{Exercício 2 - Gerador de Nota Fiscal}

O participante deve implementar um sistema de geração de nota fiscal a partir de uma fatura. 
Uma fatura contém o nome e endereço do cliente, tipo do serviço e valor da fatura. O gerador de
nota fiscal deverá gerar uma nota fiscal que contém nome do cliente, valor da nota e valor
do imposto a ser pago.

O valor da nota é o mesmo do valor da fatura. Já o cálculo do imposto a ser pago deve seguir
as seguintes regras:

\begin{enumerate}
	\item Caso o serviço seja do tipo "CONSULTORIA", o valor do imposto é de 25%;
	\item Caso o serviço seja do tipo "TREINAMENTO", o valor do imposto é 15%;
	\item Qualquer outro, o valor do imposto é 6%.
\end{enumerate}

Ao final da geração da nota fiscal, o sistema ainda deve enviar essa nota por e-mail,
para o SAP, e persistir na base de dados. Por simplicidade, o desenvolvedor pode usar
os códigos abaixo, que simulam o comportamento do SMTP, SAP e banco de dados:

class NotaFiscalDao {
	public void salva(NotaFiscal nf) { System.out.println("salvando no banco"); }
}
class SAP {
	public void envia(NotaFiscal nf) { System.out.println("enviando pro sap"); }
}
class Smtp {
	public void envia(NotaFiscal nf) { System.out.println("enviando por email"); }
}

O participante é livre para alterar os métodos, parâmetros recebidos ou qualquer outra coisa das classes acima.

Ao final, o participante deve entregar todo o código responsável por geração e encaminhamento da nota fiscal 
para os processos acima citados. Uma classe com o método "main()" deverá ser entregue ao final, com
exemplo de uso das classes criadas.

\section{Exercício 3 - Processador de Boletos}

O participante deve implementar um processador de boletos. Esse processador receberá uma lista de boletos 
(que contém basicamente código do boleto, data e valor pago) e a fatura respectiva (que contém data, valor total e nome do cliente). 
O processador deve então, para cada boleto, criar um pagamento associado nessa fatura,
guardando o valor pago, a data e o tipo do pagamento (nesse caso, "BOLETO").
Além disso, caso a soma de todos os boletos ultrapasse o valor da fatura, a mesma deve ser marcada
como "PAGA".

O participante deve criar todo o código responsável pelo processador de boletos. Uma classe com
o método "main()" deverá ser entregue ao final, com exemplo de uso das classes criadas.

Exemplos de processamento:

\begin{itemize}
	\item Fatura de 1.500,00 com 3 boletos no valor de 500,00, 400,00 e 600,00: fatura marcada como PAGA, e três pagamentos do tipo BOLETO criados 
	\item Fatura de 1.500,00 com 2 boletos no valor de 500,00 e 400,00: fatura não marcada como PAGA, e dois pagamentos do tipo BOLETO criados 
\end{itemize}

\section{Exercício 4 - Saída do Quebra-Cabeça Numérico}

O participante deve de alguma forma imprimir a saída do quebra-cabeça numérico. Esse quebra-cabeça gera
uma sequência de números, que devem ser impressos no seguinte formato: "[1 -> 2 -> 3 -> 4 ->5 ->6]" (incluindo os colchetes).

O código do quebra-cabeça maluco encontra-se abaixo:

\begin{lstlisting}
public class QuebraCabecaNumerico {

	private int entrada;
	private int saida;
	private List<Numero> fila;
	private Set<Integer> visitados;
	private Numero solucao;
	
	public QuebraCabecaNumerico() {
		this.fila = new ArrayList<Numero>();
		this.visitados = new HashSet<Integer>();
	}

	public void geraCaminho(int entrada, int saida) {
		this.entrada = entrada;
		this.saida = saida;
		
		this.solucao = buscaSolucao();
	}
	
	private Numero buscaSolucao() {
		 
		adicionaRaizNaFila();
		
		while(existemNumerosNaFila()) {
			Numero numeroAtual = removeDaFila();
			
			if(encontrouSaida(numeroAtual)) return numeroAtual;
			adicionaNaFila(
				multiplicaPorDois(numeroAtual),
				(ehPar(numeroAtual)?dividePorDois(numeroAtual):null),
				somaDois(numeroAtual)
			);
		}
		
		return null;
	}

	private boolean ehPar(Numero numeroAtual) {
		return numeroAtual.getValor()%2==0;
	}

	private boolean encontrouSaida(Numero numeroAtual) {
		return numeroAtual.getValor() == saida;
	}

	private boolean existemNumerosNaFila() {
		return fila.size()!=0;
	}

	private void adicionaRaizNaFila() {
		fila.add(new Numero(entrada, null));
	}
	
	private void adicionaNaFila(Numero... numeros) {
		for(Numero numero : numeros) {
			if(numero!=null) {
				if(!visitados.contains(numero.getValor())) {
					fila.add(numero);
					visitados.add(numero.getValor());
				}
			}
		}
	}
	
	private Numero multiplicaPorDois(Numero numero) {
		return new Numero(numero.getValor()*2, numero);
	}

	private Numero dividePorDois(Numero numero) {
		return new Numero(numero.getValor()/2, numero);
	}
	
	private Numero somaDois(Numero numero) {
		return new Numero(numero.getValor()+2, numero);
	}

	private Numero removeDaFila() {
		Numero topoDaFila = fila.get(0);
		fila.remove(0);
		return topoDaFila;
	}

}

class Numero {
	private final int valor;
	private final Numero pai;
	
	public Numero(int valor, Numero pai) {
		this.valor = valor;
		this.pai = pai;
	}
	public int getValor() {
		return valor;
	}

	public Numero getPai() {
		return pai;
	}
}
\end{lstlisting}

Repare que o único método público existente "buscaSolucao()", invoca o algoritmo e guarda a solução
dentro do atributo "solucao". Um exemplo de código que visita a árvore de números gerada pelo algoritmo é:

\begin{lstlisting}
	while(solucao!=null) {
		int valor = solucao.getValor(); // esse eh o valor a ser impresso
		solucao = solucao.getPai();
	}
\end{lstlisting}

Exemplos de saídas do algoritmo:

\begin{itemize}
	\item Entrada: 2, 2 Saída: [2]
	\item Entrada: 2, 4 Saída: [2 -> 4]
	\item Entrada: 2,10 Saída: [2 -> 4 -> 8 -> 10]
	\item Entrada: 3, 10 Saída: [3 -> 5 -> 10]
\end{itemize}

O participante deve criar todo o código responsável pela saída do quebra-cabeça numérico. Uma classe com
o método "main()" deverá ser entregue ao final, com exemplo de uso das classes criadas.

